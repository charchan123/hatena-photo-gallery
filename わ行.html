<h2>わ行のキノコ</h2>
<ul>
</ul>
<div class='nav'><a href="あ行.html">あ行</a>｜<a href="か行.html">か行</a>｜<a href="さ行.html">さ行</a>｜<a href="た行.html">た行</a>｜<a href="な行.html">な行</a>｜<a href="は行.html">は行</a>｜<a href="ま行.html">ま行</a>｜<a href="や行.html">や行</a>｜<a href="ら行.html">ら行</a>｜<strong>わ行</strong></div>

<script>
(function() {
  // 親が存在しない（直アクセス）なら処理しない
  if (window === window.parent) return;

  // 高さを親へ送信
  const sendHeight = () => {
    const height = document.documentElement.scrollHeight;
    window.parent.postMessage({ type: "setHeight", height }, "*");
  };

  // 初回送信＋画像読込後の再送信
  window.addEventListener("load", () => {
    sendHeight();
    setTimeout(sendHeight, 800);
  });

  // リサイズ・履歴変化にも対応
  window.addEventListener("resize", sendHeight);
  window.addEventListener("popstate", sendHeight);
  window.addEventListener("hashchange", sendHeight);

  // DOM変更を監視（SPA的な変化にも対応）
  const observer = new MutationObserver(() => sendHeight());
  observer.observe(document.body, { childList: true, subtree: true });

  // 画像の読み込み完了時にも再送信
  document.querySelectorAll("img").forEach(img => {
    img.addEventListener("load", sendHeight);
  });

  // 内部リンククリック時も再送信
  document.addEventListener("click", e => {
    const a = e.target.closest("a");
    if (a && a.getAttribute("href")) {
      setTimeout(sendHeight, 600);
    }
  });
})();
</script>

<style>
html, body {
  margin: 0;
  padding: 0;
  overflow-x: hidden;
  height: auto !important;
}
body {
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
  background: #fafafa;
  color: #333;
  padding: 16px;
  text-align: left;
}
h2 {
  font-size: 1.4em;
  margin-bottom: 12px;
  text-align: left;
}
ul { list-style: none; padding: 0; }
li { margin: 6px 0; text-align: left; }
a { color: #007acc; text-decoration: none; }
a:hover { text-decoration: underline; }
.nav {
  margin-top: 24px;
  font-size: 1.1em;
  flex-wrap: wrap;
  line-height: 2em;
  text-align: left;
}
strong { color: #000; text-decoration: underline; }

/* ギャラリーグリッド */
.gallery {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
  gap: 10px;
  margin-top: 20px;
}
.gallery img {
  width: 100%;
  border-radius: 8px;
  opacity: 0;
  transform: translateY(10px);
  transition: opacity 0.6s ease-out, transform 0.6s ease-out;
}
.gallery img.visible {
  opacity: 1;
  transform: translateY(0);
}

/* スマホ対応 */
@media (max-width: 600px) {
  body { padding: 12px; }
  h2 { font-size: 1.2em; }
  .gallery { gap: 6px; }
}
</style>

<script>
// フェードイン
document.addEventListener("DOMContentLoaded", () => {
  const imgs = document.querySelectorAll(".gallery img");
  const observer = new IntersectionObserver(entries => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.classList.add("visible");
        observer.unobserve(entry.target);
      }
    });
  }, { threshold: 0.1 });
  imgs.forEach(img => observer.observe(img));
});
</script>
